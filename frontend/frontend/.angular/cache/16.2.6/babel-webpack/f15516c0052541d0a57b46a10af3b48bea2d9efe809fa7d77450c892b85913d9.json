{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/user.service\";\nimport * as i2 from \"../app.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = function () {\n  return [\"/login\"];\n};\nconst _c1 = function () {\n  return [\"/signup\"];\n};\nfunction SecurityQuestionComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵtext(2, \"You are not logged in!\");\n    i0.ɵɵelement(3, \"br\")(4, \"br\")(5, \"input\", 4)(6, \"input\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c1));\n  }\n}\nconst _c2 = function () {\n  return [\"/securityQuestion\"];\n};\nfunction SecurityQuestionComponent_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\")(1, \"table\")(2, \"tr\")(3, \"td\");\n    i0.ɵɵtext(4, \"Old password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function SecurityQuestionComponent_form_3_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.old = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"tr\")(8, \"td\");\n    i0.ɵɵtext(9, \"New password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function SecurityQuestionComponent_form_3_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.new = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tr\")(13, \"td\");\n    i0.ɵɵtext(14, \"Confirm new password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function SecurityQuestionComponent_form_3_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.confirm = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tr\")(18, \"td\", 9);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"tr\")(21, \"td\", 10)(22, \"input\", 11);\n    i0.ɵɵlistener(\"click\", function SecurityQuestionComponent_form_3_Template_input_click_22_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.save());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"tr\")(24, \"td\", 10);\n    i0.ɵɵelement(25, \"hr\");\n    i0.ɵɵtext(26, \" You forgot your old password? \");\n    i0.ɵɵelementStart(27, \"a\", 12);\n    i0.ɵɵtext(28, \"Click here\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.old);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.new);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.confirm);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.message, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c2));\n  }\n}\nexport class SecurityQuestionComponent {\n  constructor(service, app) {\n    this.service = service;\n    this.app = app;\n    this.loggedIn = false;\n    this.user = new User();\n    this.old = \"\";\n    this.new = \"\";\n    this.confirm = \"\";\n    this.message = \"\";\n  }\n  ngOnInit() {\n    let item = localStorage.getItem('loggedIn');\n    if (item) this.user = JSON.parse(item);\n    if (this.user.username == \"\") this.loggedIn = false;else this.loggedIn = true;\n  }\n  save() {\n    if (this.old == \"\" || this.new == \"\" || this.confirm == \"\") {\n      this.message = \"Please fill out all fields before continuing.\";\n      return;\n    }\n    this.service.login(this.user.username, this.old).subscribe(user => {\n      if (!user) {\n        this.message = 'The old password is not correct!';\n      } else {\n        if (this.new !== this.confirm) {\n          this.message = \"The new password and the cofirmed password do not match!\";\n        } else {\n          this.service.changePassword(this.user.username, this.new).subscribe(resp => {\n            if (resp > 0) {\n              this.message = '';\n              alert(\"You have successfully changed the password.\");\n              this.app.profile();\n            } else this.message = \"Error\";\n          });\n        }\n      }\n    });\n  }\n  static #_ = this.ɵfac = function SecurityQuestionComponent_Factory(t) {\n    return new (t || SecurityQuestionComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.AppComponent));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SecurityQuestionComponent,\n    selectors: [[\"app-security-question\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"text-center\"], [\"class\", \"text-center err\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"text-center\", \"err\"], [\"type\", \"button\", \"value\", \"Log in\", 1, \"button\", \"btn\", 2, \"margin-right\", \"10px\", 3, \"routerLink\"], [\"type\", \"button\", \"value\", \"Sign up\", 1, \"button\", \"btn\", 3, \"routerLink\"], [\"type\", \"password\", \"name\", \"old\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"new\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"confirm\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"colspan\", \"2\", 1, \"err\", \"text-center\"], [\"colspan\", \"2\", 1, \"text-center\"], [\"type\", \"button\", \"value\", \"Save\", 1, \"button\", \"btn\", 3, \"click\"], [3, \"routerLink\"]],\n    template: function SecurityQuestionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1, \"Change password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, SecurityQuestionComponent_div_2_Template, 7, 4, \"div\", 1);\n        i0.ɵɵtemplate(3, SecurityQuestionComponent_form_3_Template, 29, 6, \"form\", 2);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.loggedIn == false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loggedIn == true);\n      }\n    },\n    dependencies: [i3.NgIf, i4.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction0","_c0","_c1","ɵɵlistener","SecurityQuestionComponent_form_3_Template_input_ngModelChange_6_listener","$event","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","old","SecurityQuestionComponent_form_3_Template_input_ngModelChange_11_listener","ctx_r4","new","SecurityQuestionComponent_form_3_Template_input_ngModelChange_16_listener","ctx_r5","confirm","SecurityQuestionComponent_form_3_Template_input_click_22_listener","ctx_r6","save","ctx_r1","ɵɵtextInterpolate1","message","_c2","SecurityQuestionComponent","constructor","service","app","loggedIn","user","User","ngOnInit","item","localStorage","getItem","JSON","parse","username","login","subscribe","changePassword","resp","alert","profile","_","ɵɵdirectiveInject","i1","UserService","i2","AppComponent","_2","selectors","decls","vars","consts","template","SecurityQuestionComponent_Template","rf","ctx","ɵɵtemplate","SecurityQuestionComponent_div_2_Template","SecurityQuestionComponent_form_3_Template"],"sources":["D:\\Faks\\7. semestar\\PIA\\PIA 2023\\Moj projekat\\frontend\\frontend\\src\\app\\security-question\\security-question.component.ts","D:\\Faks\\7. semestar\\PIA\\PIA 2023\\Moj projekat\\frontend\\frontend\\src\\app\\security-question\\security-question.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { UserService } from '../services/user.service';\nimport { AppComponent } from '../app.component';\n\n@Component({\n  selector: 'app-security-question',\n  templateUrl: './security-question.component.html',\n  styleUrls: ['./security-question.component.css']\n})\nexport class SecurityQuestionComponent {\n  constructor(private service: UserService, public app: AppComponent) { }\n\n  ngOnInit() {\n    let item = localStorage.getItem('loggedIn')\n    if(item) this.user = JSON.parse(item);\n    if(this.user.username == \"\") this.loggedIn = false;\n    else this.loggedIn = true;\n  }\n\n  loggedIn: boolean = false;\n  user: User = new User();\n  old: string = \"\";\n  new: string = \"\";\n  confirm: string = \"\";\n  message: string = \"\";\n\n  save() {\n    if(this.old == \"\" || this.new == \"\" || this.confirm == \"\") {\n      this.message = \"Please fill out all fields before continuing.\"; \n      return;\n    }\n    this.service.login(this.user.username, this.old).subscribe((user: User)=>{\n      if(!user){\n        this.message = 'The old password is not correct!';\n      } else {\n        if(this.new !== this.confirm) {\n          this.message = \"The new password and the cofirmed password do not match!\"\n        }\n        else {\n          this.service.changePassword(this.user.username, this.new).subscribe(resp=>{\n            if (resp>0) {\n              this.message = '';\n              alert(\"You have successfully changed the password.\")\n              this.app.profile();\n            }\n            else \n              this.message = \"Error\";\n          })\n        }\n      }\n    })\n  }\n}\n","<h2 class=\"text-center\">Change password</h2>\n<div class=\"text-center err\" *ngIf=\"loggedIn==false\">\n    <br>You are not logged in!<br><br>\n    <input type='button' value='Log in' [routerLink]=\"['/login']\" class=\"button btn\" style=\"margin-right: 10px;\">\n    <input type='button' value='Sign up' [routerLink]=\"['/signup']\" class=\"button btn\">\n</div>\n<form *ngIf=\"loggedIn==true\">\n    <table>\n        <tr>\n            <td>Old password:</td>\n            <td>\n                <input type='password' name='old' [(ngModel)]='old' class=\"form-control\">\n            </td>\n        </tr>\n        <tr>\n            <td>New password:</td>\n            <td>\n                <input type='password' name='new' [(ngModel)]='new' class=\"form-control\">\n            </td>\n        </tr>\n        <tr>\n            <td>Confirm new password:</td>\n            <td>\n                <input type='password' name='confirm' [(ngModel)]='confirm' class=\"form-control\">\n            </td>\n        </tr>\n        <tr>\n            <td colspan=\"2\" class=\"err text-center\">\n                {{message}}\n            </td>\n        </tr>\n        <tr>\n            <td colspan='2' class=\"text-center\">\n                <input type='button' value='Save' (click)='save()' class=\"button btn\">\n            </td>\n        </tr>\n        <tr>\n            <td colspan='2' class=\"text-center\">\n                <hr>\n                You forgot your old password? <a [routerLink]=\"['/securityQuestion']\">Click here</a>\n            </td>\n        </tr>\n    </table>\n</form>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}