{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { User } from '../models/User';\nexport let ChangePasswordComponent = class ChangePasswordComponent {\n  constructor(service, app) {\n    this.service = service;\n    this.app = app;\n    this.loggedIn = false;\n    this.user = new User();\n    this.old = \"\";\n    this.new = \"\";\n    this.confirm = \"\";\n    this.message = \"\";\n  }\n  ngOnInit() {\n    let item = localStorage.getItem('loggedIn');\n    if (item) this.user = JSON.parse(item);\n    if (this.user.username == \"\") this.loggedIn = false;else this.loggedIn = true;\n  }\n  save() {\n    if (this.old == \"\" || this.new == \"\" || this.confirm == \"\") {\n      this.message = \"Please fill out all fields before continuing.\";\n      return;\n    }\n    this.service.login(this.user.username, this.old).subscribe(user => {\n      if (!user) {\n        this.message = 'The old password is not correct!';\n      } else {\n        if (this.new !== this.confirm) {\n          this.message = \"The new password and the cofirmed password do not match!\";\n        } else {\n          this.service.changePassword(this.user.username, this.new).subscribe(resp => {\n            if (resp > 0) {\n              this.message = '';\n              alert(\"You have successfully changed the password.\");\n              this.app.profile();\n            } else this.message = \"Error\";\n          });\n        }\n      }\n    });\n  }\n};\nChangePasswordComponent = __decorate([Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.component.html',\n  styleUrls: ['./change-password.component.css']\n})], ChangePasswordComponent);","map":{"version":3,"names":["Component","User","ChangePasswordComponent","constructor","service","app","loggedIn","user","old","new","confirm","message","ngOnInit","item","localStorage","getItem","JSON","parse","username","save","login","subscribe","changePassword","resp","alert","profile","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Faks\\7. semestar\\PIA\\PIA 2023\\Moj projekat\\frontend\\frontend\\src\\app\\change-password\\change-password.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { User } from '../models/User';\nimport { UserService } from '../services/user.service';\nimport { AppComponent } from '../app.component';\n\n@Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.component.html',\n  styleUrls: ['./change-password.component.css']\n})\nexport class ChangePasswordComponent {\n\n  constructor(private service: UserService, public app: AppComponent) { }\n\n  ngOnInit() {\n    let item = localStorage.getItem('loggedIn')\n    if(item) this.user = JSON.parse(item);\n    if(this.user.username == \"\") this.loggedIn = false;\n    else this.loggedIn = true;\n  }\n\n  loggedIn: boolean = false;\n  user: User = new User();\n  old: string = \"\";\n  new: string = \"\";\n  confirm: string = \"\";\n  message: string = \"\";\n\n  save() {\n    if(this.old == \"\" || this.new == \"\" || this.confirm == \"\") {\n      this.message = \"Please fill out all fields before continuing.\"; \n      return;\n    }\n    this.service.login(this.user.username, this.old).subscribe((user: User)=>{\n      if(!user){\n        this.message = 'The old password is not correct!';\n      } else {\n        if(this.new !== this.confirm) {\n          this.message = \"The new password and the cofirmed password do not match!\"\n        }\n        else {\n          this.service.changePassword(this.user.username, this.new).subscribe(resp=>{\n            if (resp>0) {\n              this.message = '';\n              alert(\"You have successfully changed the password.\")\n              this.app.profile();\n            }\n            else \n              this.message = \"Error\";\n          })\n        }\n      }\n    })\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,IAAI,QAAQ,gBAAgB;AAS9B,WAAMC,uBAAuB,GAA7B,MAAMA,uBAAuB;EAElCC,YAAoBC,OAAoB,EAASC,GAAiB;IAA9C,KAAAD,OAAO,GAAPA,OAAO;IAAsB,KAAAC,GAAG,GAAHA,GAAG;IASpD,KAAAC,QAAQ,GAAY,KAAK;IACzB,KAAAC,IAAI,GAAS,IAAIN,IAAI,EAAE;IACvB,KAAAO,GAAG,GAAW,EAAE;IAChB,KAAAC,GAAG,GAAW,EAAE;IAChB,KAAAC,OAAO,GAAW,EAAE;IACpB,KAAAC,OAAO,GAAW,EAAE;EAdkD;EAEtEC,QAAQA,CAAA;IACN,IAAIC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC3C,IAAGF,IAAI,EAAE,IAAI,CAACN,IAAI,GAAGS,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;IACrC,IAAG,IAAI,CAACN,IAAI,CAACW,QAAQ,IAAI,EAAE,EAAE,IAAI,CAACZ,QAAQ,GAAG,KAAK,CAAC,KAC9C,IAAI,CAACA,QAAQ,GAAG,IAAI;EAC3B;EASAa,IAAIA,CAAA;IACF,IAAG,IAAI,CAACX,GAAG,IAAI,EAAE,IAAI,IAAI,CAACC,GAAG,IAAI,EAAE,IAAI,IAAI,CAACC,OAAO,IAAI,EAAE,EAAE;MACzD,IAAI,CAACC,OAAO,GAAG,+CAA+C;MAC9D;;IAEF,IAAI,CAACP,OAAO,CAACgB,KAAK,CAAC,IAAI,CAACb,IAAI,CAACW,QAAQ,EAAE,IAAI,CAACV,GAAG,CAAC,CAACa,SAAS,CAAEd,IAAU,IAAG;MACvE,IAAG,CAACA,IAAI,EAAC;QACP,IAAI,CAACI,OAAO,GAAG,kCAAkC;OAClD,MAAM;QACL,IAAG,IAAI,CAACF,GAAG,KAAK,IAAI,CAACC,OAAO,EAAE;UAC5B,IAAI,CAACC,OAAO,GAAG,0DAA0D;SAC1E,MACI;UACH,IAAI,CAACP,OAAO,CAACkB,cAAc,CAAC,IAAI,CAACf,IAAI,CAACW,QAAQ,EAAE,IAAI,CAACT,GAAG,CAAC,CAACY,SAAS,CAACE,IAAI,IAAE;YACxE,IAAIA,IAAI,GAAC,CAAC,EAAE;cACV,IAAI,CAACZ,OAAO,GAAG,EAAE;cACjBa,KAAK,CAAC,6CAA6C,CAAC;cACpD,IAAI,CAACnB,GAAG,CAACoB,OAAO,EAAE;aACnB,MAEC,IAAI,CAACd,OAAO,GAAG,OAAO;UAC1B,CAAC,CAAC;;;IAGR,CAAC,CAAC;EACJ;CAED;AA7CYT,uBAAuB,GAAAwB,UAAA,EALnC1B,SAAS,CAAC;EACT2B,QAAQ,EAAE,qBAAqB;EAC/BC,WAAW,EAAE,kCAAkC;EAC/CC,SAAS,EAAE,CAAC,iCAAiC;CAC9C,CAAC,C,EACW3B,uBAAuB,CA6CnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}